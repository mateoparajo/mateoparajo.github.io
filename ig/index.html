<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Instagram – mparajo448</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Google Analytics 4 (GA4) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-5EP61PTFRX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-5EP61PTFRX', { anonymize_ip: true });
  </script>

  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin:0; padding:24px; display:grid; place-items:center; min-height:100vh; background:#0b0f14; color:#e8eef6; }
    .card { width:min(520px,100%); background:#121a24; border:1px solid #223044; border-radius:16px; padding:18px; box-shadow:0 10px 30px rgba(0,0,0,.35); }
    h1 { font-size:18px; margin:0 0 10px; }
    p { margin:0 0 14px; line-height:1.35; color:#c7d4e6; }
    .row { display:flex; gap:10px; flex-wrap:wrap; }
    a.btn { display:inline-block; padding:12px 14px; border-radius:12px; text-decoration:none; border:1px solid #2a3a52; background:#1a2636; color:#e8eef6; font-weight:600; }
    a.btn.primary { background:#2a69ff; border-color:#2a69ff; }
    small { display:block; margin-top:10px; color:#93a7c2; }
    code { background:#0b0f14; padding:2px 6px; border-radius:6px; }
  </style>

  <script>
    const USERNAME = "mparajo448";
    const REDIRECT_DELAY_MS = 900; // un poco más para asegurar medición

    function param(name) {
      const v = new URLSearchParams(window.location.search).get(name);
      return (v && v.trim()) ? v.trim() : null;
    }

    const src = param("src") || "default";

    // Link normal del perfil (siempre sirve)
    const webLink = `https://www.instagram.com/${USERNAME}/`;

    // Universal link: suele abrir app directo al perfil (especialmente iOS)
    const universalProfileLink = `https://www.instagram.com/_u/${USERNAME}/`;

    function track(eventName) {
      try {
        if (typeof gtag === "function") {
          gtag("event", eventName, {
            src: src,
            username: USERNAME,
            page_path: location.pathname
          });
        }
      } catch (e) {}
    }

    function go() {
      track("qr_open");

      // 1) Intento más confiable: universal link al perfil
      window.location.href = universalProfileLink;

      // 2) Fallback al link normal del perfil (si no abre app o no navega)
      setTimeout(() => {
        window.location.href = webLink;
      }, REDIRECT_DELAY_MS);
    }

    document.addEventListener("DOMContentLoaded", () => {
      const btnApp = document.getElementById("btnApp");
      const btnWeb = document.getElementById("btnWeb");

      // Botón "Abrir en app": usamos el universal link (mejor que instagram:// en iOS)
      btnApp.href = universalProfileLink;
      btnWeb.href = webLink;

      btnApp.addEventListener("click", () => track("qr_click_open_profile"));
      btnWeb.addEventListener("click", () => track("qr_click_web"));

      go();
    });
  </script>
</head>

<body>
  <div class="card">
    <h1>Abriendo tu perfil…</h1>
    <p>Si no se abre en tu perfil, tocá una opción:</p>

    <div class="row">
      <a id="btnApp" class="btn primary" href="#">Abrir perfil en Instagram</a>
      <a id="btnWeb" class="btn" href="#">Abrir en navegador</a>
    </div>

  </div>
</body>
</html>
